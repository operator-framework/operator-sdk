entries:
  - description: >
      Adds support to bundle operators using image digests instead of tags.
    kind: "addition"
    breaking: false
    migration:
      header: Support image digests instead of tags
      body: |
        Add following variables to your project's `Makefile` below the `BUNDLE_IMG ?=`.

        ```
        # BUNDLE_GEN_FLAGS are the flags passed to the operator-sdk generate bundle command
        BUNDLE_GEN_FLAGS ?= -q --overwrite --version $(VERSION) $(BUNDLE_METADATA_OPTS)

        # USE_IMAGE_DIGESTS defines if images are resolved via tags or digests
        # You can enable this value if you would like to use SHA Based Digests
        # To enable set flag to true
        USE_IMAGE_DIGESTS ?= false
        ifeq ($(USE_IMAGE_DIGESTS), true)
            BUNDLE_GEN_FLAGS += --use-image-digests
        endif
        ```

        Using the YAML string '|' operator means that newlines in this string will
        Then in the `bundle` target we want to replace the flags passed to
        `generate bundle` with a reference to the `BUNDLE_GEN_FLAGS` above.

        The `generate bundle` line should look like this

        ```
        $(KUSTOMIZE) build config/manifests | operator-sdk generate bundle $(BUNDLE_GEN_FLAGS)
        ```

        For reference the *PREVIOUS* version looked as follows

        ```
        $(KUSTOMIZE) build config/manifests | operator-sdk generate bundle -q --overwrite --version $(VERSION) $(BUNDLE_METADATA_OPTS)
        ```
