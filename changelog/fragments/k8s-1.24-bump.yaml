# entries is a list of entries to include in
# release notes and/or the migration guide

# TODO(everettraven): update changelog
entries:
  - description: >
      For Go (go/v3) and Helm Hybrid (hybrid.helm/v1-alpha) language based operators: Upgrade Kubernetes dependencies from `1.23` to `1.24` and controller-gen from `v0.8.0` to `v0.9.0`

    # kind is one of:
    # - addition
    # - change
    # - deprecation
    # - removal
    # - bugfix
    kind: "change"

    # Is this a breaking change?
    breaking: false

    # Migration can be defined to automatically add a section to
    # the migration guide. This is required for breaking changes.
    migration:
      header: Go (go/v3) and Helm Hybrid (hybrid.helm/v1-alpha) language based operators - Upgrade Kubernetes dependencies from `1.23` to `1.24` and controller-gen from `v0.8.0` to `v0.9.0`
      body: |
        To update your project to support Kubernetes 1.24:
        
        1. In `go.mod`:

        - Replace `k8s.io/api v0.23.5` with `k8s.io/api v0.24.0`
        - Replace `k8s.io/apimachinery v0.23.5` with  `k8s.io/apimachinery v0.24.0`
        - Replace `k8s.io/client-go v0.23.5` with `k8s.io/client-go v0.24.0`
        - Replace `sigs.k8s.io/controller-runtime v0.11.2` with `sigs.k8s.io/controller-runtime v0.12.1`
        - Hybrid Helm (hybrid) only: Replace `github.com/operator-framework/helm-operator-plugins v0.0.11` with `github.com/operator-framework/helm-operator-plugins v0.0.12-0.20220608155702-d3967d2ae2ac`

        2. Run `go mod tidy` to ensure all dependencies are upgraded
        
        3. In `Makefile`:
        - Replace `CONTROLLER_TOOLS_VERSION ?= 0.8.0` with `CONTROLLER_TOOLS_VERSION ?= 0.9.0`
        - Replace `ENVTEST_K8S_VERSION = 1.23` with `ENVTEST_K8S_VERSION = 1.24`

        4. Run `make` to run all make targets

  - description: >
      For Go (go/v3) and Hybrid Helm (hybrid.helm/v1-alpha) language based operators: Add support for Go 1.18
      
    # kind is one of:
    # - addition
    # - change
    # - deprecation
    # - removal
    # - bugfix
    kind: "addition"

    # Is this a breaking change?
    breaking: false

    # Migration can be defined to automatically add a section to
    # the migration guide. This is required for breaking changes.
    migration:
      header: Go (go/v3) and Hybrid Helm (hybrid.helm/v1-alpha) language based operators - Add support for Go 1.18
      body: |
        To update your project to use Go 1.18:

        1. In the `go.mod` file:

        - Replace `go 1.17` with `go 1.18`   

        2. Run `go mod tidy` to ensure all dependencies are upgraded

  - description: >
      For `operator-sdk bundle validate` command and GoodPractices validator (`--select-optional name=good-practices`): fix channel naming validation [More info](https://github.com/operator-framework/api/pull/231)
      
    # kind is one of:
    # - addition
    # - change
    # - deprecation
    # - removal
    # - bugfix
    kind: "bugfix"

    # Is this a breaking change?
    breaking: false

  - description: >
      For `operator-sdk bundle validate` command and GoodPractices validator (`--select-optional name=good-practices`): Add CRD description check validation [More info](https://github.com/operator-framework/api/pull/234)
      
    # kind is one of:
    # - addition
    # - change
    # - deprecation
    # - removal
    # - bugfix
    kind: "addition"

    # Is this a breaking change?
    breaking: false

  - description: >
      For `operator-sdk bundle validate` command and GoodPractices validator (`--select-optional name=good-practices`): Add a new check to warn authors when permissions to create CRDs are found [More info](https://github.com/operator-framework/api/pull/241)
      
    # kind is one of:
    # - addition
    # - change
    # - deprecation
    # - removal
    # - bugfix
    kind: "addition"

    # Is this a breaking change?
    breaking: false

  - description: >
      For Helm (helm/v1) and Hybrid Helm (hybrid.helm/v1-alpha) language based operators: Upgrade helm from `v3.6.2` to `v3.9.0`
    breaking: false

  - description: >
      For Ansible (ansible/v1) and Helm (helm/v1) language based operators: change the default value for the manager.option LeaderElectionResourceLock from `comfigmaps` to `configmapsleases` to allow a safe transition to use the leases option on the future. [More info](https://github.com/kubernetes-sigs/controller-runtime/pull/1903)
    breaking: false
  
  - description: >
      For Quarkus (quarkus/v1-alpha) language based operator: add bundle generation [More info](https://github.com/operator-framework/java-operator-plugins/pull/84)
    breaking: false
  
  - description: >
      For Quarkus (quarkus/v1-alpha) language based operator: upgrade dependency from `v0.0.3` to `v0.5.1` [More info](https://github.com/operator-framework/java-operator-plugins/releases)
    breaking: false
  
  - description: >
      For Helm Hybrid (hybrid.helm/v1-alpha) language based operator: Upgrade dependency from `v0.0.10` to `v0.0.11`. [More info](https://github.com/operator-framework/helm-operator-plugins/releases)
    breaking: false

  - description: >
      For Go (go/v3, go/v2), Ansible (ansible/v1), Helm (helm/v1), and Helm Hybrid (hybrid.helm/v1-alpha) language based operators: Bump OPM version from `v1.19.1` to `v1.23.0`
    breaking: false
    migration:
      header: For Go (go/v3, go/v2), Ansible (ansible/v1), Helm (helm/v1), and Helm Hybrid (hybrid.helm/v1-alpha) language based operators - Bump OPM version from `v1.19.1` to `v1.23.0`
      body: |
        To update your project to use OPM `v1.23.0`:

        1. In the `Makefile`:

        - Replace `curl -sSLo $(OPM) https://github.com/operator-framework/operator-registry/releases/download/v1.19.1/$${OS}-$${ARCH}-opm` with `curl -sSLo $(OPM) https://github.com/operator-framework/operator-registry/releases/download/v1.23.0/$${OS}-$${ARCH}-opm`   

        2. Run `make opm`
  - description: >
      For Docker images: Bump Go from 1.17 to 1.18
    breaking: false