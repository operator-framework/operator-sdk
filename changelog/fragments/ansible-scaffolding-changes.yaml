# entries is a list of entries to include in
# release notes and/or the migration guide
entries:
  - description: >
      Ansible scaffolding got modified in order to incorporate with Kubebuilder `--component-config` flag changes. Previously, it was scaffolding and doing some file changes without considering the `--component-config` flag.
      Now, this PR made changes that will consider the `--component-config` flag and modify the scaffolded file.

      1. If the `--component-config` flag is passed then look for `- /manager` in the file in order to add leader election id to the manager.yaml file. If flag is not passed then look for `--leader-elect`.
      2. Same logic for manager proxy patch file, look for `memory: 64Mi` if the flag is passed. If a flag is not passed then look for `--leader-elect`
      3. Repeat the same logic for replacing the port number from the file.
      4. At the end, update the `manager.yaml` file to avoid lint errors.
    kind: "change"
    breaking: false
    migration:
      header: this change also modified ansible molecule test that was looking for `--leader-elect` in the file.
      body: |
        In the advance molecule test, modified code to behave properly with new `--component-config` flag changes.

        ```
          	err = kbutil.InsertCode(
                    filepath.Join(ma.ctx.Dir, "config", "default", "manager_auth_proxy_patch.yaml"),
                    "- \"--leader-election-id=advanced-molecule-operator\"",
                    managerAuthArgs)
        ``` 